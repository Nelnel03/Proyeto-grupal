<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - Dashboard</title>

    <link rel="stylesheet" href="../styles/global.css">
    <link rel="stylesheet" href="../styles/admin.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.6.0/remixicon.css">
</head>

<body>

    <div class="nav">
        <div class="nav-header">
            <img src="../imgs/descarga.png" alt="Logo Municipalidad" class="nav-logo">
            <h1>Municipalidad de Puntarenas</h1>
        </div>
        <ul class="nav-links">
            <li><a href="../pages/home.html">Inicio</a></li>
        </ul>
    </div>

    <aside class="sidebar">
        <h2>Panel Admin</h2>
        <button id="btnMenuReportes" class="active">Gesti√≥n de Reportes</button>
        <button id="btnMenuProyectos">Gesti√≥n de Proyectos Viales</button>
        <button id="btnMenuServicios">Gesti√≥n de Servicios P√∫blicos</button>
        <button id="btnMenuMensajes">Mensajes de Contacto</button>
        <button id="btnMenuUsuarios">Gesti√≥n de Usuarios</button>
        <button id="btnMenuPlanillas">Gesti√≥n de Salarios</button>
        <button id="btnMenuFinanciamiento">Solicitudes Proyectos (Funcionarios)</button>
        <hr style="opacity: 0.1; margin: 10px 0;">
        <a href="../pages/financiamiento.html" class="sidebar-link">
            <i class="ri-user-fill"></i> Vista Funcionario (Solicitudes)
        </a>
    </aside>

    <div class="main">

        <section id="seccionUsuarios" class="seccion">
            <hr>
            <h1>Gesti√≥n de Usuarios</h1>
            <p>Administra los ciudadanos registrados y ot√≥rgales permisos de administrador si es necesario.</p>
            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Nombre</th>
                        <th>Correo</th>
                        <th>Tel√©fono</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody id="tablaUsuarios">
                </tbody>
            </table>
        </section>

        <section id="seccionReportes" class="seccion activa">
            <hr>
            <h1>Gesti√≥n de Reportes</h1>
            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Tipo</th>
                        <th>Descripci√≥n</th>
                        <th>Ubicaci√≥n</th>
                        <th>Estado</th>
                        <th>Fecha</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody id="tablaReportes">
                </tbody>
            </table>
        </section>

        <section id="seccionProyectos" class="seccion">
            <hr>
            <h1>Gesti√≥n de Proyectos Viales</h1>

            <div class="formulario">
                <h3 id="tituloFormProyecto">Crear Proyecto</h3>
                <input type="text" id="proyNombre" placeholder="Nombre del proyecto">
                <textarea id="proyDescripcion" placeholder="Descripci√≥n"></textarea>
                <input type="number" id="proyPresupuesto" placeholder="Presupuesto (‚Ç°)">
                <input type="date" id="proyFechaInicio">
                <select id="proyEstado">
                    <option value="Planificaci√≥n">Planificaci√≥n</option>
                    <option value="En Proceso">En Proceso</option>
                    <option value="Completado">Completado</option>
                </select>
                <div class="acciones">
                    <button id="btnCrearProyecto" class="btn btnCrear">Guardar Proyecto</button>
                    <button id="btnCancelarProyecto" class="btn btnCancelar" style="display:none;">Cancelar</button>
                </div>
            </div>
            <hr>
            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Nombre</th>
                        <th>Descripci√≥n</th>
                        <th>Presupuesto</th>
                        <th>Fecha Inicio</th>
                        <th>Estado</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody id="tablaProyectos">
                </tbody>
            </table>
        </section>
        <section id="seccionServicios" class="seccion">
            <hr>
            <h1>Gesti√≥n de Servicios P√∫blicos</h1>

            <div class="formulario">
                <h3 id="tituloFormServicio">Crear Servicio</h3>
                <input type="text" id="servTipo" placeholder="Tipo de servicio">
                <textarea id="servDescripcion" placeholder="Descripci√≥n"></textarea>
                <input type="text" id="servResponsable" placeholder="Responsable">
                <select id="servEstado">
                    <option value="Activo">Activo</option>
                    <option value="Inactivo">Inactivo</option>
                    <option value="En Mantenimiento">En Mantenimiento</option>
                </select>
                <div class="acciones">
                    <button id="btnCrearServicio" class="btn btn-crear">Guardar Servicio</button>
                    <button id="btnCancelarServicio" class="btn btn-cancelar" style="display:none;">Cancelar</button>
                </div>
            </div>
            <hr>
            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Tipo</th>
                        <th>Descripci√≥n</th>
                        <th>Responsable</th>
                        <th>Estado</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody id="tablaServicios">
                </tbody>
            </table>
        </section>

        <section id="seccionMensajes" class="seccion">
            <hr>
            <h1>Mensajes de Contacto</h1>
            <p>Aqu√≠ puedes ver los mensajes enviados por los ciudadanos desde el formulario de contacto.</p>
            <table>
                <thead>
                    <tr>
                        <th>Fecha</th>
                        <th>Remitente</th>
                        <th>C√©dula</th>
                        <th>Correo</th>
                        <th>Comentario</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody id="tablaMensajes">
                    <!-- Los mensajes se cargar√°n aqu√≠ -->
                </tbody>
            </table>
        </section>

        <section id="seccionPlanillas" class="seccion">
            <hr>
            <h1>Gesti√≥n de Salarios</h1>
            <p>Administra los pagos y salarios de los empleados municipales.</p>

            <div class="formulario">
                <h3 id="tituloFormPlanilla">Registrar Nueva Planilla</h3>
                <div class="input-container">
                    <label for="planUsuarioId">Empleado</label>
                    <select id="planUsuarioId">
                        <option value="">-- Seleccionar Empleado --</option>
                    </select>
                </div>
                <div class="input-container">
                    <label for="planPuesto">Puesto</label>
                    <input type="text" id="planPuesto" placeholder="Ej: Operario">
                </div>
                <div class="input-container">
                    <label for="planDepto">Departamento</label>
                    <input type="text" id="planDepto" placeholder="Ej: Servicios Generales">
                </div>
                <div class="input-container">
                    <label for="planSalarioBase">Salario Base (‚Ç°)</label>
                    <input type="number" id="planSalarioBase" placeholder="0">
                </div>
                <div class="input-container">
                    <label for="planHorasExtra">Horas Extra</label>
                    <input type="number" id="planHorasExtra" value="0">
                </div>
                <div class="input-container">
                    <label for="planRebajos">Rebajos (‚Ç°)</label>
                    <input type="number" id="planRebajos" value="0">
                </div>
                <div class="input-container">
                    <label for="planImagen">URL de Imagen</label>
                    <input type="text" id="planImagen" placeholder="https://ejemplo.com/foto.jpg">
                </div>
                <div class="input-container">
                    <label for="planDescripcion">Descripci√≥n de Funciones</label>
                    <textarea id="planDescripcion"
                        placeholder="Describe brevemente las labores del empleado"></textarea>
                </div>

                <div class="salario-neto-preview"
                    style="background: #f0f0f0; padding: 10px; border-radius: 5px; margin: 10px 0;">
                    <strong>Salario Neto: ‚Ç°<span id="planNetoPreview">0.00</span></strong>
                </div>

                <div class="acciones">
                    <button id="btnCrearPlanilla" class="btn btn-crear">Guardar Planilla</button>
                    <button id="btnCancelarPlanilla" class="btn btn-cancelar" style="display:none;">Cancelar</button>
                </div>
            </div>
            <hr>
            <table>
                <thead>
                    <tr>
                        <th>Empleado</th>
                        <th>Puesto / Depto</th>
                        <th>Salario Base</th>
                        <th>H. Extra</th>
                        <th>Rebajos</th>
                        <th>Neto</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody id="tablaPlanillas">
                </tbody>
            </table>
        </section>

        <section id="seccionFinanciamiento" class="seccion">
            <hr>
            <h1>Control de Aprobaciones - Financiamiento</h1>
            <p>Vista exclusiva para administradores. Apruebe o rechace solicitudes y asigne el monto final financiado.
            </p>

            <div class="formulario" id="formAprobacionFinanciamiento" style="display: none;">
                <h3 id="tituloFormFinanciamiento">Procesar Solicitud</h3>
                <div class="input-container">
                    <label>Nombre del Proyecto / Servicio (Editable):</label>
                    <input type="text" id="finProyecto">
                </div>
                <div class="input-container">
                    <label for="finTipo">Tipo de Resultado Final:</label>
                    <select id="finTipo">
                        <option value="vial">Proyecto Vial</option>
                        <option value="servicio">Servicio P√∫blico</option>
                    </select>
                </div>
                <div class="input-container">
                    <label>Monto Solicitado (‚Ç°):</label>
                    <input type="number" id="finMonto" disabled>
                </div>
                <div class="input-container">
                    <label for="finMontoAprobado">Monto Aprobado Final (‚Ç°)</label>
                    <input type="number" id="finMontoAprobado" placeholder="0">
                    <small style="color: #666;">No puede exceder el monto solicitado.</small>
                </div>
                <div class="input-container">
                    <label for="finEstado">Estado de la Resoluci√≥n</label>
                    <select id="finEstado">
                        <option value="Pendiente">Pendiente</option>
                        <option value="Aprobado">Aprobado</option>
                        <option value="Rechazado">Rechazado</option>
                    </select>
                </div>
                <div class="input-container">
                    <label for="finResponsable">Entidad Responsable / Ejecutora:</label>
                    <input type="text" id="finResponsable" placeholder="Ej: Ministerio de Salud, CONAVI, etc.">
                </div>
                <div class="input-container" id="containerFechaInicio">
                    <label for="finFechaInicio">Fecha de Inicio Estimada:</label>
                    <input type="date" id="finFechaInicio">
                </div>

                <div class="input-container">
                    <label for="finDescripcion">Descripci√≥n Detallada (Para Publicaci√≥n):</label>
                    <textarea id="finDescripcion" placeholder="Justificaci√≥n de la resoluci√≥n..."></textarea>
                </div>

                <div class="acciones" style="display: flex; gap: 10px; margin-top: 20px;">
                    <button id="btnPublicarProyecto" class="btn btn-crear"
                        style="flex: 2; background-color: #27ae60;">üöÄ Publicar en Inicio</button>
                    <button id="btnGuardarBorrador" class="btn btn-actualizar" style="flex: 1;">üíæ Guardar
                        Borrador</button>
                    <button id="btnEliminarSolicitud" class="btn btn-eliminar" style="flex: 1;">üóëÔ∏è Eliminar</button>
                    <button id="btnCancelarResolucion" class="btn btn-cancelar" style="flex: 1;">Cerrar</button>
                </div>
            </div>
            <hr>
            <table>
                <thead>
                    <tr>
                        <th>Proyecto</th>
                        <th>Solicitado</th>
                        <th>Aprobado</th>
                        <th>Entidad</th>
                        <th>Estado</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody id="tablaFinanciamientos">
                </tbody>
            </table>
        </section>

    </div>

    <div id="modalDetalle" class="modal-fondo">
        <div class="modal-contenido">
            <h3>Detalle del Reporte</h3>
            <hr>
            <p><strong>ID:</strong> <span id="detalleId"></span></p>
            <p><strong>Usuario:</strong> <span id="detalleUsuario"></span></p>
            <p><strong>Tipo:</strong> <span id="detalleTipo"></span></p>
            <p><strong>Descripci√≥n:</strong> <span id="detalleDescripcion"></span></p>
            <p><strong>Ubicaci√≥n:</strong> <span id="detalleUbicacion"></span></p>
            <p><strong>Estado:</strong> <span id="detalleEstado"></span></p>
            <p><strong>Fecha:</strong> <span id="detalleFecha"></span></p>
            <button id="btnCerrarModal" class="btn btn-cancelar">Cerrar</button>
        </div>
    </div>

    <footer>
        <p>¬© 2026 Municipalidad de Puntarenas ‚Äî Todos los derechos reservados</p>
    </footer>

    <script src="../js/admin.js" type="module"></script>
</body>

</html>